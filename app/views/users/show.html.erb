<% if @user == current_user %>
  <h1>Profile</h1>
<% else %>
  <h1>User</h1>
<% end %>

<%= render @user %>

<%# Show button to add friend unless own profile or Friendship request (object) already exists %>
<% unless @user == current_user || current_user.friends.exists?(@user.id) %>
  <%= form_with url: '/friends', method: 'post' do |form| %>
    <%= form.hidden_field :user_id, value: current_user.id %>
    <%= form.hidden_field :friend_id, value: @user.id %>
    <%= form.submit 'Add friend' %>
  <% end %>
<% end %> 

<%#  %>
<% if @friendship1 && @friendship1.status == 1 %>
  <% if @role == 'requester' %>
    <%= button_tag 'Pending approval', disabled: true %>
    <%= link_to 'Cancel request', "/friends/#{@friendship1.id}", data: { turbo_method: :delete } %>
  <% else %>
    <%= link_to 'Accept request', "/friends/#{@friendship1.id}", data: { turbo_method: :patch } %>
    <%= link_to 'Reject request', "/friends/#{@friendship1.id}", data: { turbo_method: :delete } %>
  <% end %>
<% end %>